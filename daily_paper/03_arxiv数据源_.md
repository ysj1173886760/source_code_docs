# Chapter 3: ArXivæ•°æ®æº

åœ¨[ç¬¬äºŒç« ](02_dagæµæ°´çº¿å¤„ç†å™¨_.md)ä¸­ï¼Œæˆ‘ä»¬å­¦ä¼šäº†å¦‚ä½•æ­å»ºè®ºæ–‡å¤„ç†çš„"æµæ°´çº¿å·¥å‚"ã€‚ç°åœ¨æˆ‘ä»¬éœ€è¦ç¨³å®šçš„"åŸææ–™ä¾›åº”å•†"â€”â€”è¿™å°±æ˜¯æœ¬ç« çš„ä¸»è§’**ArXivæ•°æ®æº**ï¼Œå®ƒèƒ½ä»å…¨çƒæœ€å¤§çš„é¢„å°æœ¬å¹³å°ArXivä¸ºæˆ‘ä»¬æŠ“å–æœ€æ–°å­¦æœ¯è®ºæ–‡ã€‚

## ä¸ºä»€ä¹ˆéœ€è¦ä¸“é—¨çš„æ•°æ®æºï¼Ÿ

æƒ³è±¡ä½ æ˜¯ä¸€åç¾é£Ÿåšä¸»ï¼Œæ¯å¤©éœ€è¦ï¼š
1. å»èœå¸‚åœºæŒ‘é€‰æ–°é²œé£Ÿæï¼ˆè·å–è®ºæ–‡ï¼‰
2. å¤„ç†æˆæ ‡å‡†è§„æ ¼çš„é£Ÿæï¼ˆç»Ÿä¸€æ•°æ®æ ¼å¼ï¼‰
3. å­˜æ”¾åˆ°å¨æˆ¿å¤‡é¤åŒºï¼ˆä¼ é€’ç»™ä¸‹æ¸¸ï¼‰

ArXivæ•°æ®æºå°±æ˜¯ä½ çš„æ™ºèƒ½é‡‡è´­åŠ©æ‰‹ï¼Œå¯ä»¥ï¼š
- è‡ªåŠ¨æŒ‰ä¸»é¢˜æœç´¢è®ºæ–‡ï¼ˆå¦‚"æ·±åº¦å­¦ä¹ "ï¼‰
- å¤„ç†åˆ†é¡µå’Œé”™è¯¯é‡è¯•
- è¿”å›ç»“æ„åŒ–çš„`Paper`å¯¹è±¡

## åˆè¯†ArXivæ•°æ®æº

æ‰“å¼€`arxiv.py`æ–‡ä»¶ï¼Œæ ¸å¿ƒåŠŸèƒ½å°±åƒè´­ç‰©æ¸…å•ï¼š

```python
class ArxivSource(Operator):
    """æ™ºèƒ½è®ºæ–‡é‡‡è´­å‘˜"""
    def __init__(self, topic: str | List[str]):
        self.topic = "æ·±åº¦å­¦ä¹ "  # è®¾ç½®é‡‡è´­ä¸»é¢˜
        self.max_retries = 10   # æœ€å¤§é‡è¯•æ¬¡æ•°
        
    async def process(self) -> List[Paper]:
        """è¿”å›æ ‡å‡†è®ºæ–‡æ•°æ®"""
        papers = await self._fetch_from_arxiv()
        return papers
```

### ä½¿ç”¨ç¤ºä¾‹
```python
# åˆ›å»ºä¸€ä¸ªAIä¸»é¢˜çš„é‡‡è´­å‘˜
procurement = ArxivSource(topic="äººå·¥æ™ºèƒ½")

# è·å–æœ€æ–°è®ºæ–‡
ai_papers = await procurement.process()
print(f"è·å–åˆ°{len(ai_papers)}ç¯‡AIè®ºæ–‡")
```

## æ ¸å¿ƒåŠŸèƒ½è¯¦è§£

### 1. ä¸»é¢˜æœç´¢èƒ½åŠ›
æ”¯æŒå•ä¸»é¢˜æˆ–å¤šä¸»é¢˜ç»„åˆæœç´¢ï¼š
```python
# å•ä¸»é¢˜æœç´¢
single = ArxivSource(topic="æœºå™¨å­¦ä¹ ")

# å¤šä¸»é¢˜æœç´¢ï¼ˆæ•ˆæœç­‰åŒäº"æœºå™¨å­¦ä¹  OR æ·±åº¦å­¦ä¹ ")
multi = ArxivSource(topic=["æœºå™¨å­¦ä¹ ", "æ·±åº¦å­¦ä¹ "])
```

### 2. åˆ†é¡µæ§åˆ¶
åƒç¿»ä¹¦ä¸€æ ·è·å–ä¸åŒé¡µç çš„è®ºæ–‡ï¼š
```python
# ä»ç¬¬50æ¡å¼€å§‹è·å–100æ¡
pager = ArxivSource(
    topic="ç¥ç»ç½‘ç»œ",
    search_offset=50,  # èµ·å§‹ä½ç½®
    search_limit=100   # è·å–æ•°é‡
)
```

### 3. æ•°æ®æ ‡å‡†åŒ–
å°†åŸå§‹æ•°æ®è½¬æ¢ä¸ºæ ‡å‡†`Paper`å¯¹è±¡ï¼š
```mermaid
sequenceDiagram
    participant ArXiv as ArXivåŸå§‹æ•°æ®
    participant è½¬æ¢å™¨ as æ•°æ®è½¬æ¢å™¨
    participant è¾“å‡º as Paperå¯¹è±¡
    
    ArXiv->>è½¬æ¢å™¨: {"title":"è®ºæ–‡æ ‡é¢˜"...}
    è½¬æ¢å™¨->>è¾“å‡º: Paper(id="123", title="è®ºæ–‡æ ‡é¢˜"...)
```

## å®æˆ˜æ“ä½œæŒ‡å—

### åŸºç¡€ä½¿ç”¨ä¸‰æ­¥èµ°
1. **åˆ›å»ºé‡‡è´­å‘˜**ï¼šæ˜ç¡®éœ€è¦çš„è®ºæ–‡ä¸»é¢˜
   ```python
   buyer = ArxivSource(topic="è®¡ç®—æœºè§†è§‰")
   ```
   
2. **è·å–æ•°æ®**ï¼šæ”¯æŒæ‰¹é‡æˆ–æµå¼è·å–
   ```python
   # æ‰¹é‡è·å–ï¼ˆé€‚åˆå°‘é‡æ•°æ®ï¼‰
   papers = await buyer.process()
   
   # æµå¼è·å–ï¼ˆé€‚åˆå¤§æ•°æ®é‡ï¼‰
   async for paper in buyer.stream_process():
       print(paper.title)
   ```

3. **å¼‚å¸¸å¤„ç†**ï¼šè‡ªåŠ¨é‡è¯•æœºåˆ¶
   ```python
   buyer = ArxivSource(
       topic="è‡ªç„¶è¯­è¨€å¤„ç†",
       should_retry_when_empty=True  # ç©ºç»“æœæ—¶è‡ªåŠ¨é‡è¯•
   )
   ```

### å·¥ä½œæµé›†æˆ
ä¸[DAGæµæ°´çº¿å¤„ç†å™¨](02_dagæµæ°´çº¿å¤„ç†å™¨_.md)é…åˆä½¿ç”¨ï¼š
```python
from daily_paper.core.operators import ArxivSource

pipeline = DAGPipeline()
pipeline.add_operator("æ•°æ®æº", ArxivSource(topic="é‡å­è®¡ç®—"))
# ...æ·»åŠ å…¶ä»–å¤„ç†ç¯èŠ‚
```

## å†…éƒ¨å·¥ä½œåŸç†æ­ç§˜

å½“è°ƒç”¨`process()`æ–¹æ³•æ—¶ï¼š
1. **å»ºç«‹è¿æ¥**ï¼šåˆ›å»ºArXiv APIå®¢æˆ·ç«¯
   ```python
   client = arxiv.Client(num_retries=100)
   ```

2. **æ‰§è¡Œæœç´¢**ï¼šæŒ‰ä¸»é¢˜å’Œåˆ†é¡µæŸ¥è¯¢
   ```python
   search = arxiv.Search(
       query="æ·±åº¦å­¦ä¹ ",
       max_results=100,
       sort_by=arxiv.SortCriterion.SubmittedDate  # æŒ‰æäº¤æ—¥æœŸæ’åº
   )
   ```

3. **æ•°æ®è½¬æ¢**ï¼šç»Ÿä¸€å­—æ®µæ ¼å¼
   ```python
   def process_paper(result):
       return Paper(
           id=result.get_short_id(),
           title=result.title,
           abstract=result.summary,
           # å…¶ä»–å­—æ®µ...
       )
   ```

## ä¸ºä»€ä¹ˆé€‰æ‹©ArXivï¼Ÿ

- ğŸŒ **å…¨çƒæœ€å¤§**ï¼šè¦†ç›–æ‰€æœ‰å­¦ç§‘çš„é¢„å°æœ¬è®ºæ–‡
- âš¡ **å³æ—¶æ›´æ–°**ï¼šæ¯”æ­£å¼æœŸåˆŠæ›´å¿«è·å–æœ€æ–°ç ”ç©¶
- ğŸ” **ç²¾ç¡®æœç´¢**ï¼šæ”¯æŒé«˜çº§æ£€ç´¢è¯­æ³•
- ğŸ“¦ **è§„èŒƒæ•°æ®**ï¼šæä¾›ç»“æ„åŒ–å…ƒæ•°æ®

## æ€»ç»“ä¸ä¸‹ä¸€æ­¥

ä»Šå¤©æˆ‘ä»¬å­¦ä¼šäº†ï¼š
- ArXivæ•°æ®æºæ˜¯æˆ‘ä»¬çš„"æ™ºèƒ½è®ºæ–‡é‡‡è´­å‘˜"
- æ”¯æŒæŒ‰ä¸»é¢˜æœç´¢å’Œåˆ†é¡µæ§åˆ¶
- è‡ªåŠ¨å°†åŸå§‹æ•°æ®è½¬æ¢ä¸ºæ ‡å‡†`Paper`å¯¹è±¡

åœ¨ä¸‹ä¸€ç« ï¼Œæˆ‘ä»¬å°†è®¤è¯†ç³»ç»Ÿçš„"å¤§è„‘"â€”â€”[LLMæ‘˜è¦ç”Ÿæˆå™¨](04_llmæ‘˜è¦ç”Ÿæˆå™¨_.md)ï¼Œå®ƒèƒ½æŠŠé‡‡è´­æ¥çš„è®ºæ–‡åŠ å·¥æˆæ˜“è¯»çš„ç²¾åå†…å®¹ï¼

---

Generated by [AI Codebase Knowledge Builder](https://github.com/The-Pocket/Tutorial-Codebase-Knowledge)