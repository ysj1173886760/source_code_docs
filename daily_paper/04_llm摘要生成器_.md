# Chapter 4: LLMæ‘˜è¦ç”Ÿæˆå™¨

åœ¨[ç¬¬ä¸‰ç« ](03_arxivæ•°æ®æº_.md)ä¸­ï¼Œæˆ‘ä»¬å­¦ä¼šäº†å¦‚ä½•ä»ArXivè·å–åŸå§‹è®ºæ–‡æ•°æ®ã€‚å°±åƒé‡‡è´­äº†æ–°é²œé£Ÿæåï¼Œç°åœ¨éœ€è¦ä¸€ä½"ç‰¹çº§å¨å¸ˆ"æ¥çƒ¹è°ƒå‡ºç¾å‘³çš„èœè‚´â€”â€”è¿™å°±æ˜¯æœ¬ç« è¦ä»‹ç»çš„**LLMæ‘˜è¦ç”Ÿæˆå™¨**ï¼Œå®ƒèƒ½å°†è‰°æ·±çš„å­¦æœ¯è®ºæ–‡è½¬åŒ–ä¸ºé€šä¿—æ˜“æ‡‚çš„ä¸­æ–‡æ‘˜è¦ã€‚

## ä¸ºä»€ä¹ˆéœ€è¦æ‘˜è¦ç”Ÿæˆï¼Ÿ

æƒ³è±¡ä½ è¦é˜…è¯»100ç¯‡å…³äºé‡å­åŠ›å­¦çš„è®ºæ–‡ï¼š
- ç›´æ¥é˜…è¯»åŸæ–‡å¯èƒ½éœ€è¦500å°æ—¶ï¼ˆçœ¼ç›ä¼šç´¯åå§ï¼Ÿï¼‰
- è€Œé˜…è¯»æ‘˜è¦å¯èƒ½åªéœ€2å°æ—¶ï¼ˆè¿˜èƒ½è¾¹å–å’–å•¡è¾¹çœ‹ï¼‰

æˆ‘ä»¬ç³»ç»Ÿçš„AIå¤§è„‘å¯ä»¥ï¼š
```mermaid
pie
    title æ—¶é—´èŠ‚çœå¯¹æ¯”
    "é˜…è¯»åŸæ–‡" : 500
    "é˜…è¯»AIæ‘˜è¦" : 2
```

## åˆè¯†æ‘˜è¦ç”Ÿæˆå™¨

æ‰“å¼€`core/operators/processor/llm_summarizer.py`æ–‡ä»¶ï¼Œæ ¸å¿ƒåŠŸèƒ½å°±åƒä½ çš„ç§äººå­¦æœ¯åŠ©ç†ï¼š

```python
class LLMSummarizer(Operator):
    """è®ºæ–‡æµ“ç¼©å’–å•¡æœº"""
    def __init__(self, llm_config):
        self.client = openai.AsyncOpenAI(api_key="ä½ çš„å¯†é’¥")  # è¿æ¥AIå¤§è„‘
        self.model = "gpt-3.5-turbo"  # é€‰ç”¨èªæ˜çš„å°åŠ©æ‰‹
```

### åŸºç¡€ä½¿ç”¨ç¤ºä¾‹
```python
# å‡†å¤‡ä¸€å°æµ“ç¼©å’–å•¡æœº
summarizer = LLMSummarizer(llm_config)

# æ”¾å…¥è®ºæ–‡åŸæ–™ï¼Œå¾—åˆ°ç²¾åæ‘˜è¦
summary = await summarizer.summarize_paper("å¤æ‚çš„è®ºæ–‡å†…å®¹...")
print(f"ç”Ÿæˆæ‘˜è¦ï¼š{summary[:50]}...")
```

## æ ¸å¿ƒåŠŸèƒ½è¯¦è§£

### 1. å¹¶å‘æ§åˆ¶
å°±åƒå’–å•¡åº—çš„å¤šå¤´èƒå–ç³»ç»Ÿï¼Œå¯ä»¥åŒæ—¶å¤„ç†å¤šç¯‡è®ºæ–‡ï¼š
```python
self.semaphore = asyncio.Semaphore(16)  # å…è®¸16ç¯‡åŒæ—¶å¤„ç†

async def summarize_paper(self, paper_text):
    async with self.semaphore:  # è·å–ä¸€ä¸ªå¤„ç†æ§½ä½
        return await self._call_llm(paper_text)
```

### 2. æ™ºèƒ½æç¤ºè¯
æˆ‘ä»¬ç»™AIçš„"çƒ¹é¥ªæŒ‡å—"ï¼š
```python
prompt = """
è¯·ç”¨é€šä¿—æ˜“æ‡‚çš„ä¸­æ–‡æ€»ç»“è¿™ç¯‡è®ºæ–‡ï¼š
1. ç”¨å°å­¦ç”Ÿèƒ½æ‡‚çš„è¯­è¨€
2. åŒ…å«æ ¸å¿ƒç»“è®º
3. ä¸è¶…è¿‡200å­—

è®ºæ–‡å†…å®¹ï¼š{paper_text}
"""
```

### 3. æ•°æ®å¤„ç†æµç¨‹
```mermaid
sequenceDiagram
    participant ç”¨æˆ· as ç³»ç»Ÿç”¨æˆ·
    participant ç”Ÿæˆå™¨ as æ‘˜è¦ç”Ÿæˆå™¨
    participant LLM as å¤§è¯­è¨€æ¨¡å‹
    
    ç”¨æˆ·->>ç”Ÿæˆå™¨: è¾“å…¥åŸå§‹è®ºæ–‡
    ç”Ÿæˆå™¨->>LLM: å‘é€ç²¾ç®€è¯·æ±‚
    LLM->>ç”Ÿæˆå™¨: è¿”å›ä¸­æ–‡æ‘˜è¦
    ç”Ÿæˆå™¨->>ç”¨æˆ·: è¾“å‡ºç»“æ„åŒ–ç»“æœ
```

## å®æˆ˜æ“ä½œæŒ‡å—

### ä¸‰æ­¥ç”Ÿæˆæ‘˜è¦
1. **åˆå§‹åŒ–é…ç½®**ï¼š
   ```python
   from daily_paper.core.config import LLMConfig
   
   llm_config = LLMConfig(
       model_name="gpt-4",
       api_key="sk-...",
       max_concurrent_requests=10  # å¹¶å‘æ•°
   )
   ```

2. **åˆ›å»ºç”Ÿæˆå™¨**ï¼š
   ```python
   from daily_paper.core.operators import LLMSummarizer
   
   assistant = LLMSummarizer(llm_config)
   ```

3. **æ‰¹é‡å¤„ç†è®ºæ–‡**ï¼š
   ```python
   papers = [("è®ºæ–‡1å†…å®¹...", "è®ºæ–‡2å†…å®¹...")]  # æ¨¡æ‹Ÿè¾“å…¥
   results = await assistant.process(papers)
   
   for paper in results:
       print(f"{paper.title}çš„æ‘˜è¦ï¼š{paper.summary[:100]}...")
   ```

## å†…éƒ¨å·¥ä½œæ­ç§˜

å½“è°ƒç”¨`summarize_paper()`æ—¶ï¼š
1. **è¯·æ±‚å°è£…**ï¼šå‡†å¤‡AIèƒ½ç†è§£çš„æ ¼å¼
   ```python
   messages = [
       {"role": "system", "content": "ä½ æ˜¯ä¸€ä½è€å¿ƒçš„ç§‘å­¦è€å¸ˆ"},
       {"role": "user", "content": "è¯·ç”¨æ¯”å–»è§£é‡Šè¿™ç¯‡è®ºæ–‡..."}
   ]
   ```

2. **è°ƒç”¨API**ï¼šä¸äº‘ç«¯AIäº¤äº’
   ```python
   response = await self.client.chat.completions.create(
       model=self.model,
       messages=messages,
       temperature=0.7  # æ§åˆ¶åˆ›æ„ç¨‹åº¦
   )
   ```

3. **ç»“æœè§£æ**ï¼šæå–æ ¸å¿ƒå†…å®¹
   ```python
   return response.choices[0].message.content
   ```

## ä¸ºä»€ä¹ˆé€‰æ‹©LLMï¼Ÿ

- ğŸ§  **ç†è§£æ·±åˆ»**ï¼šèƒ½æ•æ‰è®ºæ–‡æ ¸å¿ƒæ€æƒ³
- ğŸ’¬ **è¡¨è¾¾è‡ªç„¶**ï¼šç”Ÿæˆæµç•…çš„ä¸­æ–‡æ‘˜è¦
- âš¡ **æ•ˆç‡è¶…é«˜**ï¼š10åˆ†é’Ÿå¤„ç†100ç¯‡è®ºæ–‡
- ğŸ”§ **çµæ´»é€‚é…**ï¼šæ”¯æŒå¤šç§å¤§æ¨¡å‹åˆ‡æ¢

## æ€»ç»“ä¸ä¸‹ä¸€æ­¥

ä»Šå¤©æˆ‘ä»¬æŒæ¡äº†ï¼š
- LLMæ‘˜è¦ç”Ÿæˆå™¨æ˜¯ç³»ç»Ÿçš„"ç‰¹çº§å¨å¸ˆ"
- é€šè¿‡æ™ºèƒ½æç¤ºè¯æ§åˆ¶æ‘˜è¦é£æ ¼
- åˆ©ç”¨å¹¶å‘å¤„ç†æå‡æ•ˆç‡

åœ¨ä¸‹ä¸€ç« ï¼Œæˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•æŠŠåˆ¶ä½œå¥½çš„"çŸ¥è¯†ç¾é£Ÿ"é€è¾¾åˆ°ç”¨æˆ·é¢å‰â€”â€”[é£ä¹¦æ¨é€å™¨](05_é£ä¹¦æ¨é€å™¨_.md)å°†æ‹…ä»»æˆ‘ä»¬çš„"å¤–å–å°å“¥"ï¼

---

Generated by [AI Codebase Knowledge Builder](https://github.com/The-Pocket/Tutorial-Codebase-Knowledge)